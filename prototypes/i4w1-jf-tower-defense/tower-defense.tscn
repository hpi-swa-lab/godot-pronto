[gd_scene load_steps=70 format=3 uid="uid://da42rhb2vls1m"]

[ext_resource type="Script" path="res://addons/pronto/behaviors/Placeholder.gd" id="1_5i2nd"]
[ext_resource type="Script" path="res://prototypes/i4w1-jf-tower-defense/tower-defense.gd" id="1_wa5o0"]
[ext_resource type="Script" path="res://addons/pronto/behaviors/Spawner.gd" id="2_2kynd"]
[ext_resource type="Script" path="res://addons/pronto/behaviors/Code.gd" id="3_1dipl"]
[ext_resource type="Script" path="res://addons/pronto/helpers/Connection.gd" id="4_0nawf"]
[ext_resource type="Script" path="res://addons/pronto/helpers/ConnectionScript.gd" id="4_gmxrw"]
[ext_resource type="Script" path="res://prototypes/i4w1-jf-tower-defense/Enemy.gd" id="5_lwmg1"]
[ext_resource type="Script" path="res://addons/pronto/behaviors/PrototypingUI.gd" id="6_rt3b5"]
[ext_resource type="Script" path="res://addons/pronto/behaviors/Clock.gd" id="7_s3v3w"]
[ext_resource type="Script" path="res://addons/pronto/behaviors/SceneRoot.gd" id="8_2r0ku"]
[ext_resource type="Script" path="res://addons/pronto/behaviors/Value.gd" id="11_2imrd"]
[ext_resource type="Script" path="res://addons/pronto/behaviors/State.gd" id="12_laxul"]
[ext_resource type="Script" path="res://addons/pronto/behaviors/Bind.gd" id="13_wys14"]

[sub_resource type="GDScript" id="GDScript_e5la8"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(instance, from):
	print(instance.get_node(\"NavigationAgent2D\"))
"

[sub_resource type="Resource" id="Resource_8e6xu"]
script = ExtResource("4_gmxrw")
nested_script = SubResource("GDScript_e5la8")
argument_names = ["instance", "from"]
return_value = false

[sub_resource type="GDScript" id="GDScript_xic4x"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(instance, from):
	return true
"

[sub_resource type="Resource" id="Resource_4i6xw"]
script = ExtResource("4_gmxrw")
nested_script = SubResource("GDScript_xic4x")
argument_names = ["instance", "from"]
return_value = true

[sub_resource type="Resource" id="Resource_u03uj"]
script = ExtResource("4_0nawf")
signal_name = "spawned"
to = NodePath("")
invoke = ""
arguments = []
only_if = SubResource("Resource_4i6xw")
expression = SubResource("Resource_8e6xu")
deferred = false
enabled = true

[sub_resource type="GDScript" id="GDScript_s672m"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from, to):
	return \"enemy\"
"

[sub_resource type="Resource" id="Resource_pnno7"]
script = ExtResource("4_gmxrw")
nested_script = SubResource("GDScript_s672m")
argument_names = ["from", "to"]
return_value = true

[sub_resource type="GDScript" id="GDScript_0krgv"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from, to):
	return func(from, node): node.attacker_in_range(from.get_parent())
"

[sub_resource type="Resource" id="Resource_kniyk"]
script = ExtResource("4_gmxrw")
nested_script = SubResource("GDScript_0krgv")
argument_names = ["from", "to"]
return_value = true

[sub_resource type="GDScript" id="GDScript_sghgp"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from, to):
	return get_parent().global_position
"

[sub_resource type="Resource" id="Resource_ueaot"]
script = ExtResource("4_gmxrw")
nested_script = SubResource("GDScript_sghgp")
argument_names = ["from", "to"]
return_value = true

[sub_resource type="GDScript" id="GDScript_flkks"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from, to):
	return G.at(\"range\")
"

[sub_resource type="Resource" id="Resource_ss1it"]
script = ExtResource("4_gmxrw")
nested_script = SubResource("GDScript_flkks")
argument_names = ["from", "to"]
return_value = true

[sub_resource type="GDScript" id="GDScript_kaotm"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from, to):
	return true
"

[sub_resource type="Resource" id="Resource_obfro"]
script = ExtResource("4_gmxrw")
nested_script = SubResource("GDScript_kaotm")
argument_names = ["from", "to"]
return_value = true

[sub_resource type="Resource" id="Resource_2b3xi"]
script = ExtResource("4_0nawf")
signal_name = "elapsed"
to = NodePath("../SceneRoot")
invoke = "apply_within_dist"
arguments = [SubResource("Resource_pnno7"), SubResource("Resource_kniyk"), SubResource("Resource_ueaot"), SubResource("Resource_ss1it")]
only_if = SubResource("Resource_obfro")
deferred = false
enabled = true

[sub_resource type="GDScript" id="GDScript_bcrhr"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from, to):
	return \"troop\"
"

[sub_resource type="Resource" id="Resource_s8ch6"]
script = ExtResource("4_gmxrw")
nested_script = SubResource("GDScript_bcrhr")
argument_names = ["from", "to"]
return_value = true

[sub_resource type="GDScript" id="GDScript_j5up4"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from, to):
	return func(from, node): node.attacker_in_range(from.get_parent())
"

[sub_resource type="Resource" id="Resource_lesna"]
script = ExtResource("4_gmxrw")
nested_script = SubResource("GDScript_j5up4")
argument_names = ["from", "to"]
return_value = true

[sub_resource type="GDScript" id="GDScript_kv6wp"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from, to):
	return get_parent().global_position
"

[sub_resource type="Resource" id="Resource_cls0h"]
script = ExtResource("4_gmxrw")
nested_script = SubResource("GDScript_kv6wp")
argument_names = ["from", "to"]
return_value = true

[sub_resource type="GDScript" id="GDScript_o6bbw"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from, to):
	return G.at(\"range\")
"

[sub_resource type="Resource" id="Resource_2m3kv"]
script = ExtResource("4_gmxrw")
nested_script = SubResource("GDScript_o6bbw")
argument_names = ["from", "to"]
return_value = true

[sub_resource type="GDScript" id="GDScript_08htg"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from, to):
	return true
"

[sub_resource type="Resource" id="Resource_lpf8q"]
script = ExtResource("4_gmxrw")
nested_script = SubResource("GDScript_08htg")
argument_names = ["from", "to"]
return_value = true

[sub_resource type="Resource" id="Resource_hbtlc"]
script = ExtResource("4_0nawf")
signal_name = "elapsed"
to = NodePath("../SceneRoot")
invoke = "apply_within_dist"
arguments = [SubResource("Resource_s8ch6"), SubResource("Resource_lesna"), SubResource("Resource_cls0h"), SubResource("Resource_2m3kv")]
only_if = SubResource("Resource_lpf8q")
deferred = false
enabled = true

[sub_resource type="GDScript" id="GDScript_in53g"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run():
	if (at(\"player_money\") < 50):
		return false
	dec(\"player_money\", 50)
	return true
"

[sub_resource type="Resource" id="Resource_5yemp"]
script = ExtResource("4_gmxrw")
nested_script = SubResource("GDScript_in53g")
argument_names = []
return_value = true

[sub_resource type="GDScript" id="GDScript_bv0jf"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(result, from, to):
	return result
"

[sub_resource type="Resource" id="Resource_i8j3n"]
script = ExtResource("4_gmxrw")
nested_script = SubResource("GDScript_bv0jf")
argument_names = ["result", "from", "to"]
return_value = true

[sub_resource type="Resource" id="Resource_tnr71"]
script = ExtResource("4_0nawf")
signal_name = "after"
to = NodePath("../../../Spawner")
invoke = "spawn"
arguments = []
only_if = SubResource("Resource_i8j3n")
deferred = false
enabled = true

[sub_resource type="GDScript" id="GDScript_bh8r6"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(result, from, to):
	var rng = RandomNumberGenerator.new()
	var rndX = rng.randi_range(575, 1150)
	var rndY = rng.randi_range(0, 650)
	return Vector2(rndX, rndY)
	
"

[sub_resource type="Resource" id="Resource_vdxoq"]
script = ExtResource("4_gmxrw")
nested_script = SubResource("GDScript_bh8r6")
argument_names = ["result", "from", "to"]
return_value = true

[sub_resource type="GDScript" id="GDScript_fwwrg"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(result, from, to):
	return true
"

[sub_resource type="Resource" id="Resource_xtm80"]
script = ExtResource("4_gmxrw")
nested_script = SubResource("GDScript_fwwrg")
argument_names = ["result", "from", "to"]
return_value = true

[sub_resource type="Resource" id="Resource_a3h3y"]
script = ExtResource("4_0nawf")
signal_name = "after"
to = NodePath("../../../EnemySpawner")
invoke = "spawn_at"
arguments = [SubResource("Resource_vdxoq")]
only_if = SubResource("Resource_xtm80")
deferred = false
enabled = true

[sub_resource type="NavigationPolygon" id="NavigationPolygon_l2jg2"]
vertices = PackedVector2Array(-106, 694, 121, 387, 1029, 379, 1130, 379, 1199, 747, 1229, -31, 1128, 277, 20, 287, -29, -36, 1029, 279, 121, 287, 20, 387)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3, 4), PackedInt32Array(5, 4, 3, 6), PackedInt32Array(7, 8, 5, 6, 9, 10), PackedInt32Array(11, 1, 0), PackedInt32Array(11, 0, 8, 7), PackedInt32Array(10, 9, 2, 1)])
outlines = Array[PackedVector2Array]([PackedVector2Array(20, 287, 121, 287, 121, 387, 20, 387), PackedVector2Array(1029, 279, 1128, 277, 1130, 379, 1029, 379), PackedVector2Array(-29, -36, 1229, -31, 1199, 747, -106, 694)])

[sub_resource type="GDScript" id="GDScript_lhnjy"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from, to):
	return \"player_money\"
"

[sub_resource type="Resource" id="Resource_mssep"]
script = ExtResource("4_gmxrw")
nested_script = SubResource("GDScript_lhnjy")
argument_names = ["from", "to"]
return_value = true

[sub_resource type="GDScript" id="GDScript_15k8m"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from, to):
	return G.at(\"money_inc\")
"

[sub_resource type="Resource" id="Resource_2bsfd"]
script = ExtResource("4_gmxrw")
nested_script = SubResource("GDScript_15k8m")
argument_names = ["from", "to"]
return_value = true

[sub_resource type="GDScript" id="GDScript_4kn6d"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from, to):
	return true
"

[sub_resource type="Resource" id="Resource_bgev6"]
script = ExtResource("4_gmxrw")
nested_script = SubResource("GDScript_4kn6d")
argument_names = ["from", "to"]
return_value = true

[sub_resource type="Resource" id="Resource_ysxx3"]
script = ExtResource("4_0nawf")
signal_name = "elapsed"
to = NodePath("State")
invoke = "inc"
arguments = [SubResource("Resource_mssep"), SubResource("Resource_2bsfd")]
only_if = SubResource("Resource_bgev6")
deferred = false
enabled = true

[sub_resource type="GDScript" id="GDScript_pi21n"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from, to):
	return \"enemy_money\"
"

[sub_resource type="Resource" id="Resource_hjy35"]
script = ExtResource("4_gmxrw")
nested_script = SubResource("GDScript_pi21n")
argument_names = ["from", "to"]
return_value = true

[sub_resource type="GDScript" id="GDScript_2aeug"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from, to):
	return G.at(\"money_inc\")
"

[sub_resource type="Resource" id="Resource_b33gw"]
script = ExtResource("4_gmxrw")
nested_script = SubResource("GDScript_2aeug")
argument_names = ["from", "to"]
return_value = true

[sub_resource type="GDScript" id="GDScript_v404y"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from, to):
	return true
"

[sub_resource type="Resource" id="Resource_fv1ib"]
script = ExtResource("4_gmxrw")
nested_script = SubResource("GDScript_v404y")
argument_names = ["from", "to"]
return_value = true

[sub_resource type="Resource" id="Resource_3dbip"]
script = ExtResource("4_0nawf")
signal_name = "elapsed"
to = NodePath("State")
invoke = "inc"
arguments = [SubResource("Resource_hjy35"), SubResource("Resource_b33gw")]
only_if = SubResource("Resource_fv1ib")
deferred = false
enabled = true

[sub_resource type="GDScript" id="GDScript_6d4hq"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run():
	return \"$ \" + str(G.at(\"player_money\"))
"

[sub_resource type="Resource" id="Resource_dyfov"]
script = ExtResource("4_gmxrw")
nested_script = SubResource("GDScript_6d4hq")
argument_names = []
return_value = true

[sub_resource type="GDScript" id="GDScript_fn84l"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run():
	return str(G.at(\"enemy_money\")) + \" $\"
"

[sub_resource type="Resource" id="Resource_dsti8"]
script = ExtResource("4_gmxrw")
nested_script = SubResource("GDScript_fn84l")
argument_names = []
return_value = true

[node name="Node2D" type="Node2D"]
script = ExtResource("1_wa5o0")

[node name="BlueField" type="Area2D" parent="."]
position = Vector2(288, 326)

[node name="Placeholder" type="Node2D" parent="BlueField"]
script = ExtResource("1_5i2nd")
color = Color(0, 1, 1, 0.305882)
placeholder_size = Vector2(575, 650)

[node name="BlueField2" type="Area2D" parent="."]
position = Vector2(865, 326)

[node name="Placeholder" type="Node2D" parent="BlueField2"]
script = ExtResource("1_5i2nd")
color = Color(1, 0, 0, 0.305882)
placeholder_size = Vector2(575, 650)

[node name="MyCastle" type="StaticBody2D" parent="."]
position = Vector2(71, 337)

[node name="Placeholder" type="Node2D" parent="MyCastle"]
script = ExtResource("1_5i2nd")
label = "    You"
color = Color(0.196078, 0.454902, 0.882353, 1)
placeholder_size = Vector2(100, 100)

[node name="EnemyCastle" type="StaticBody2D" parent="."]
position = Vector2(1080, 328)

[node name="Placeholder" type="Node2D" parent="EnemyCastle"]
script = ExtResource("1_5i2nd")
label = "   Enemy"
color = Color(0.701961, 0, 0.164706, 1)
placeholder_size = Vector2(100, 100)

[node name="Spawner" type="Node2D" parent="."]
position = Vector2(90, 121)
script = ExtResource("2_2kynd")
metadata/pronto_connections = [SubResource("Resource_u03uj")]

[node name="Troop" type="CharacterBody2D" parent="Spawner" node_paths=PackedStringArray("target_location") groups=["selectable", "troop"]]
position = Vector2(33, 40)
script = ExtResource("5_lwmg1")
speed = 80
target_location = NodePath("../../EnemyCastle")
color = Color(0, 0, 1, 1)

[node name="Placeholder" type="Node2D" parent="Spawner/Troop"]
script = ExtResource("1_5i2nd")
color = Color(0, 0, 1, 1)

[node name="NavigationAgent2D" type="NavigationAgent2D" parent="Spawner/Troop"]
avoidance_enabled = true
radius = 114.6

[node name="NavigationObstacle2D" type="NavigationObstacle2D" parent="Spawner/Troop"]

[node name="Clock" type="Node2D" parent="Spawner/Troop"]
position = Vector2(89, -42)
script = ExtResource("7_s3v3w")
trigger_interval_in_seconds = 1.0
metadata/pronto_connections = [SubResource("Resource_2b3xi")]

[node name="SceneRoot" type="Node2D" parent="Spawner/Troop"]
position = Vector2(28, 14)
script = ExtResource("8_2r0ku")

[node name="EnemySpawner" type="Node2D" parent="."]
position = Vector2(984, 39)
script = ExtResource("2_2kynd")
metadata/pronto_connections = [SubResource("Resource_u03uj")]

[node name="Enemy" type="CharacterBody2D" parent="EnemySpawner" node_paths=PackedStringArray("target_location") groups=["enemy", "selectable"]]
position = Vector2(33, 40)
script = ExtResource("5_lwmg1")
speed = 80
health = 50
target_location = NodePath("../../MyCastle")
color = Color(1, 0, 0, 1)

[node name="Placeholder" type="Node2D" parent="EnemySpawner/Enemy"]
script = ExtResource("1_5i2nd")
color = Color(1, 0, 0, 1)

[node name="NavigationAgent2D" type="NavigationAgent2D" parent="EnemySpawner/Enemy"]
avoidance_enabled = true
radius = 114.6

[node name="NavigationObstacle2D" type="NavigationObstacle2D" parent="EnemySpawner/Enemy"]

[node name="Clock" type="Node2D" parent="EnemySpawner/Enemy"]
position = Vector2(38, -15)
script = ExtResource("7_s3v3w")
trigger_interval_in_seconds = 1.0
metadata/pronto_connections = [SubResource("Resource_hbtlc")]

[node name="SceneRoot" type="Node2D" parent="EnemySpawner/Enemy"]
position = Vector2(28, 20)
script = ExtResource("8_2r0ku")

[node name="PanelContainer" type="PanelContainer" parent="."]
offset_right = 319.0
offset_bottom = 103.0

[node name="PrototypingUI" type="Node2D" parent="PanelContainer"]
position = Vector2(15, 14)
script = ExtResource("6_rt3b5")

[node name="Spawn Troop" type="Node2D" parent="PanelContainer/PrototypingUI"]
position = Vector2(10, 109)
script = ExtResource("3_1dipl")
evaluate = SubResource("Resource_5yemp")
metadata/pronto_connections = [SubResource("Resource_tnr71")]

[node name="Spawn Enemy" type="Node2D" parent="PanelContainer/PrototypingUI"]
position = Vector2(292, 38)
script = ExtResource("3_1dipl")
evaluate = SubResource("Resource_5yemp")
metadata/pronto_connections = [SubResource("Resource_a3h3y")]

[node name="range" type="Node2D" parent="PanelContainer/PrototypingUI"]
position = Vector2(-38.4854, -38.4854)
script = ExtResource("11_2imrd")
float_from = 50.0
float_to = 500.0
float_value = 250.0
float_step_size = 1.0

[node name="money_inc" type="Node2D" parent="PanelContainer/PrototypingUI"]
position = Vector2(1.48786e-05, -170.191)
script = ExtResource("11_2imrd")
float_from = 1.0
float_to = 100.0
float_value = 10.0
float_step_size = 1.0

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="."]
visible = false
navigation_polygon = SubResource("NavigationPolygon_l2jg2")

[node name="MoneyClock" type="Node2D" parent="."]
position = Vector2(-185, 83)
script = ExtResource("7_s3v3w")
trigger_interval_in_seconds = 1.0
metadata/pronto_connections = [SubResource("Resource_ysxx3"), SubResource("Resource_3dbip")]

[node name="State" type="Node2D" parent="MoneyClock"]
position = Vector2(104, -2)
script = ExtResource("12_laxul")
global = true
metadata/player_money = 0.0
metadata/enemy_money = 0.0

[node name="MoneyLabel" type="Label" parent="."]
offset_left = 16.0
offset_top = 611.0
offset_right = 163.0
offset_bottom = 637.0
text = "$"

[node name="Bind" type="Node2D" parent="MoneyLabel"]
position = Vector2(-52.779, 52.779)
script = ExtResource("13_wys14")
evaluate = SubResource("Resource_dyfov")
to_prop = "text"

[node name="EnemyMoneyLabel" type="Label" parent="."]
offset_left = 989.0
offset_top = 607.0
offset_right = 1136.0
offset_bottom = 633.0
text = "$"
horizontal_alignment = 2

[node name="Bind" type="Node2D" parent="EnemyMoneyLabel"]
position = Vector2(-52.779, 52.779)
script = ExtResource("13_wys14")
evaluate = SubResource("Resource_dsti8")
to_prop = "text"
