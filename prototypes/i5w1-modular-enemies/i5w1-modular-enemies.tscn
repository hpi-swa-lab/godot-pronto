[gd_scene load_steps=100 format=3 uid="uid://dfaw7ve5q2474"]

[ext_resource type="Script" path="res://addons/pronto/behaviors/PlaceholderShape.gd" id="1_ui1dh"]
[ext_resource type="Script" path="res://addons/pronto/behaviors/HealthBar.gd" id="2_m4bil"]
[ext_resource type="Script" path="res://addons/pronto/behaviors/State.gd" id="3_rub11"]
[ext_resource type="Script" path="res://addons/pronto/helpers/ConnectionScript.gd" id="4_wxur5"]
[ext_resource type="Script" path="res://addons/pronto/helpers/Connection.gd" id="5_w82r7"]
[ext_resource type="Script" path="res://addons/pronto/behaviors/Code.gd" id="6_2s4u3"]
[ext_resource type="Script" path="res://addons/pronto/behaviors/Bind.gd" id="6_3m8bw"]
[ext_resource type="Script" path="res://prototypes/i5w1-modular-enemies/Button.gd" id="6_adlgl"]
[ext_resource type="Script" path="res://addons/pronto/behaviors/PrototypingUI.gd" id="9_lk3db"]
[ext_resource type="Script" path="res://addons/pronto/behaviors/Value.gd" id="10_liufr"]

[sub_resource type="GDScript" id="GDScript_jy73i"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from: Node2D, to: Node2D):
	return true
"

[sub_resource type="Resource" id="Resource_cwg6l"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_jy73i")
argument_names = ["from", "to"]
return_value = true

[sub_resource type="Resource" id="Resource_0s3tt"]
script = ExtResource("5_w82r7")
signal_name = "death"
to = NodePath("../..")
more_references = []
invoke = "queue_free"
arguments = []
only_if = SubResource("Resource_cwg6l")
deferred = false
enabled = true

[sub_resource type="GDScript" id="GDScript_fexlv"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from: Node2D):
	print(\"Defeated enemy\")
"

[sub_resource type="Resource" id="Resource_72mqv"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_fexlv")
argument_names = ["from"]
return_value = false

[sub_resource type="GDScript" id="GDScript_cvtpo"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from: Node2D):
	return true
"

[sub_resource type="Resource" id="Resource_fdv0t"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_cvtpo")
argument_names = ["from"]
return_value = true

[sub_resource type="Resource" id="Resource_s5ikj"]
script = ExtResource("5_w82r7")
signal_name = "death"
to = NodePath("")
more_references = []
invoke = ""
arguments = []
only_if = SubResource("Resource_fdv0t")
expression = SubResource("Resource_72mqv")
deferred = false
enabled = true

[sub_resource type="GDScript" id="GDScript_37qhu"]
script/source = "extends Button


# Called when the node enters the scene tree for the first time.
func _ready():
	self.pressed.connect(_emit_pressed)

var target_name = \"Head\"

func _emit_pressed():
	if G.at(\"Target\") != target_name:
		for child in get_parent().get_parent().get_children():
				(child as PlaceholderShape).color = Color.WHITE
				
		G.put(\"Target\", target_name)
		get_parent().color = Color.FIREBRICK
		print(target_name + \" selected\")
	else:
		G.put(\"Target\", \"None\")
		get_parent().color = Color.WHITE
		print(target_name + \" deselected\")
	


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	pass
"

[sub_resource type="GDScript" id="GDScript_nrspf"]
script/source = "extends Button


# Called when the node enters the scene tree for the first time.
func _ready():
	self.pressed.connect(_emit_pressed)

var target_name = \"Torso\"

func _emit_pressed():
	if G.at(\"Target\") != target_name:
		for child in get_parent().get_parent().get_children():
				(child as PlaceholderShape).color = Color.WHITE
				
		G.put(\"Target\", target_name)
		get_parent().color = Color.FIREBRICK
		print(target_name + \" selected\")
	else:
		G.put(\"Target\", \"None\")
		get_parent().color = Color.WHITE
		print(target_name + \" deselected\")


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	pass
"

[sub_resource type="GDScript" id="GDScript_3cywh"]
script/source = "extends Button


# Called when the node enters the scene tree for the first time.
func _ready():
	self.pressed.connect(_emit_pressed)

var target_name = \"Arm_Left\"

func _emit_pressed():
	if G.at(\"Target\") != target_name:
		for child in get_parent().get_parent().get_children():
				(child as PlaceholderShape).color = Color.WHITE
				
		G.put(\"Target\", target_name)
		get_parent().color = Color.FIREBRICK
		print(target_name + \" selected\")
	else:
		G.put(\"Target\", \"None\")
		get_parent().color = Color.WHITE
		print(target_name + \" deselected\")

# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	pass
"

[sub_resource type="GDScript" id="GDScript_uls4b"]
script/source = "extends Button


# Called when the node enters the scene tree for the first time.
func _ready():
	self.pressed.connect(_emit_pressed)

var target_name = \"Arm_Right\"

func _emit_pressed():
	if G.at(\"Target\") != target_name:
		for child in get_parent().get_parent().get_children():
				(child as PlaceholderShape).color = Color.WHITE
				
		G.put(\"Target\", target_name)
		get_parent().color = Color.FIREBRICK
		print(target_name + \" selected\")
	else:
		G.put(\"Target\", \"None\")
		get_parent().color = Color.WHITE
		print(target_name + \" deselected\")

# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	pass
"

[sub_resource type="GDScript" id="GDScript_1c2oq"]
script/source = "extends Button


# Called when the node enters the scene tree for the first time.
func _ready():
	self.pressed.connect(_emit_pressed)

var target_name = \"Leg_Left\"

func _emit_pressed():
	if G.at(\"Target\") != target_name:
		for child in get_parent().get_parent().get_children():
				(child as PlaceholderShape).color = Color.WHITE
				
		G.put(\"Target\", target_name)
		get_parent().color = Color.FIREBRICK
		print(target_name + \" selected\")
	else:
		G.put(\"Target\", \"None\")
		get_parent().color = Color.WHITE
		print(target_name + \" deselected\")

# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	pass
"

[sub_resource type="GDScript" id="GDScript_nvc8g"]
script/source = "extends Button


# Called when the node enters the scene tree for the first time.
func _ready():
	self.pressed.connect(_emit_pressed)

var target_name = \"Leg_Right\"

func _emit_pressed():
	if G.at(\"Target\") != target_name:
		for child in get_parent().get_parent().get_children():
				(child as PlaceholderShape).color = Color.WHITE
				
		G.put(\"Target\", target_name)
		get_parent().color = Color.FIREBRICK
		print(target_name + \" selected\")
	else:
		G.put(\"Target\", \"None\")
		get_parent().color = Color.WHITE
		print(target_name + \" deselected\")
# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	pass
"

[sub_resource type="GDScript" id="GDScript_gcl24"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(transition_id, from: Node2D, to: Node2D):
	return transition_id==1
"

[sub_resource type="Resource" id="Resource_2hj8v"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_gcl24")
argument_names = ["transition_id", "from", "to"]
return_value = true

[sub_resource type="Resource" id="Resource_vu03w"]
script = ExtResource("5_w82r7")
signal_name = "exited"
to = NodePath("../enemy_turn")
more_references = []
invoke = "enter"
arguments = []
only_if = SubResource("Resource_2hj8v")
deferred = false
enabled = true

[sub_resource type="GDScript" id="GDScript_wdj0e"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from: Node2D):
	print(\"Starting player turn\")
"

[sub_resource type="Resource" id="Resource_nt4oa"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_wdj0e")
argument_names = ["from"]
return_value = false

[sub_resource type="GDScript" id="GDScript_yt5qj"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from: Node2D):
	return true
"

[sub_resource type="Resource" id="Resource_kap8k"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_yt5qj")
argument_names = ["from"]
return_value = true

[sub_resource type="Resource" id="Resource_odjah"]
script = ExtResource("5_w82r7")
signal_name = "entered"
to = NodePath("")
more_references = []
invoke = ""
arguments = []
only_if = SubResource("Resource_kap8k")
expression = SubResource("Resource_nt4oa")
deferred = false
enabled = true

[sub_resource type="GDScript" id="GDScript_e7vsq"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from: Node2D):
	print(\"Starting enemy turn\")
"

[sub_resource type="Resource" id="Resource_ci1fo"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_e7vsq")
argument_names = ["from"]
return_value = false

[sub_resource type="GDScript" id="GDScript_18js2"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from: Node2D):
	return true
"

[sub_resource type="Resource" id="Resource_7lt44"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_18js2")
argument_names = ["from"]
return_value = true

[sub_resource type="Resource" id="Resource_npar6"]
script = ExtResource("5_w82r7")
signal_name = "entered"
to = NodePath("")
more_references = []
invoke = ""
arguments = []
only_if = SubResource("Resource_7lt44")
expression = SubResource("Resource_ci1fo")
deferred = false
enabled = true

[sub_resource type="GDScript" id="GDScript_5jdjd"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from: Node2D, to: Node2D):
	return true
"

[sub_resource type="Resource" id="Resource_kk3gy"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_5jdjd")
argument_names = ["from", "to"]
return_value = true

[sub_resource type="Resource" id="Resource_rdfaw"]
script = ExtResource("5_w82r7")
signal_name = "entered"
to = NodePath("head")
more_references = []
invoke = "enter"
arguments = []
only_if = SubResource("Resource_kk3gy")
deferred = false
enabled = true

[sub_resource type="GDScript" id="GDScript_ofny4"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(transition_id, from: Node2D, to: Node2D):
	return transition_id==6
"

[sub_resource type="Resource" id="Resource_bfbxi"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_ofny4")
argument_names = ["transition_id", "from", "to"]
return_value = true

[sub_resource type="Resource" id="Resource_gbulo"]
script = ExtResource("5_w82r7")
signal_name = "exited"
to = NodePath("../player_turn")
more_references = []
invoke = "enter"
arguments = []
only_if = SubResource("Resource_bfbxi")
deferred = false
enabled = true

[sub_resource type="GDScript" id="GDScript_grqph"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(transition_id, from: Node2D, to: Node2D):
	return transition_id==2
"

[sub_resource type="Resource" id="Resource_i0b4l"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_grqph")
argument_names = ["transition_id", "from", "to"]
return_value = true

[sub_resource type="Resource" id="Resource_dxgdp"]
script = ExtResource("5_w82r7")
signal_name = "exited"
to = NodePath("../torso")
more_references = []
invoke = "enter"
arguments = []
only_if = SubResource("Resource_i0b4l")
deferred = false
enabled = true

[sub_resource type="GDScript" id="GDScript_b3xmg"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from: Node2D, to: Node2D):
	return true
"

[sub_resource type="Resource" id="Resource_ew5j1"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_b3xmg")
argument_names = ["from", "to"]
return_value = true

[sub_resource type="Resource" id="Resource_5jou4"]
script = ExtResource("5_w82r7")
signal_name = "entered"
to = NodePath("Code")
more_references = []
invoke = "execute"
arguments = []
only_if = SubResource("Resource_ew5j1")
deferred = false
enabled = true

[sub_resource type="GDScript" id="GDScript_3gkaj"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run():
	var phrases = [
		\"You're no match for me!\",
		\"Prepare to meet your doom!\",
		\"I'll make you regret crossing my path!\",
		\"Feel the wrath of my blade!\",
		\"Your end is near!\",
		\"You're nothing but a weakling!\",
		\"I'll crush you like a bug!\",
		\"I'll enjoy watching you suffer!\",
		\"You'll beg for mercy before I'm done with you!\",
		\"Your skills are laughable!\",
		\"You can't escape your fate!\",
		\"I'll send you straight to the afterlife!\",
		\"Pathetic! Is that all you've got?\",
		\"You're a mere speck of dust in my presence!\",
		\"I'll make sure you never rise again!\",
		\"Your feeble attempts won't save you!\",
		\"You're about to witness true power!\",
		\"Prepare to be annihilated!\",
		\"Your resistance is futile!\",
		\"I'll enjoy tearing you apart!\"
	]
	var rand_phrase = phrases[randi() % phrases.size()]
	print(\"Enemy: \\\"\" + rand_phrase + \"\\\"\")

"

[sub_resource type="Resource" id="Resource_gy78w"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_3gkaj")
argument_names = []
return_value = true

[sub_resource type="GDScript" id="GDScript_ljaxq"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(result, from: Node2D, to: Node2D):
	return 2
"

[sub_resource type="Resource" id="Resource_hw4ev"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_ljaxq")
argument_names = ["result", "from", "to"]
return_value = true

[sub_resource type="GDScript" id="GDScript_5sg5y"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(result, from: Node2D, to: Node2D):
	return true
"

[sub_resource type="Resource" id="Resource_5a2o2"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_5sg5y")
argument_names = ["result", "from", "to"]
return_value = true

[sub_resource type="Resource" id="Resource_idsmn"]
script = ExtResource("5_w82r7")
signal_name = "after"
to = NodePath("..")
more_references = []
invoke = "exit"
arguments = [SubResource("Resource_hw4ev")]
only_if = SubResource("Resource_5a2o2")
deferred = false
enabled = true

[sub_resource type="GDScript" id="GDScript_pv1ug"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(transition_id, from: Node2D, to: Node2D):
	return transition_id==3
"

[sub_resource type="Resource" id="Resource_4r822"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_pv1ug")
argument_names = ["transition_id", "from", "to"]
return_value = true

[sub_resource type="Resource" id="Resource_qugsu"]
script = ExtResource("5_w82r7")
signal_name = "exited"
to = NodePath("../arms")
more_references = []
invoke = "enter"
arguments = []
only_if = SubResource("Resource_4r822")
deferred = false
enabled = true

[sub_resource type="GDScript" id="GDScript_fgt5a"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from: Node2D, to: Node2D):
	return true
"

[sub_resource type="Resource" id="Resource_i5r0e"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_fgt5a")
argument_names = ["from", "to"]
return_value = true

[sub_resource type="Resource" id="Resource_nmegl"]
script = ExtResource("5_w82r7")
signal_name = "entered"
to = NodePath("Code")
more_references = []
invoke = "execute"
arguments = []
only_if = SubResource("Resource_i5r0e")
deferred = false
enabled = true

[sub_resource type="GDScript" id="GDScript_216hc"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run():
	print(\">> Skipping Torso Turn << \")
"

[sub_resource type="Resource" id="Resource_pww34"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_216hc")
argument_names = []
return_value = true

[sub_resource type="GDScript" id="GDScript_s7kfb"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(result, from: Node2D, to: Node2D):
	return 3
"

[sub_resource type="Resource" id="Resource_lhlva"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_s7kfb")
argument_names = ["result", "from", "to"]
return_value = true

[sub_resource type="GDScript" id="GDScript_uarbm"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(result, from: Node2D, to: Node2D):
	return true
"

[sub_resource type="Resource" id="Resource_g14p8"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_uarbm")
argument_names = ["result", "from", "to"]
return_value = true

[sub_resource type="Resource" id="Resource_ghrl2"]
script = ExtResource("5_w82r7")
signal_name = "after"
to = NodePath("..")
more_references = []
invoke = "exit"
arguments = [SubResource("Resource_lhlva")]
only_if = SubResource("Resource_g14p8")
deferred = false
enabled = true

[sub_resource type="GDScript" id="GDScript_g2pmc"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(transition_id, from: Node2D, to: Node2D):
	return transition_id==4
"

[sub_resource type="Resource" id="Resource_6ffq1"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_g2pmc")
argument_names = ["transition_id", "from", "to"]
return_value = true

[sub_resource type="Resource" id="Resource_8ejj3"]
script = ExtResource("5_w82r7")
signal_name = "exited"
to = NodePath("../legs")
more_references = []
invoke = "enter"
arguments = []
only_if = SubResource("Resource_6ffq1")
deferred = false
enabled = true

[sub_resource type="GDScript" id="GDScript_dne0s"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from: Node2D, to: Node2D):
	return true
"

[sub_resource type="Resource" id="Resource_kds5n"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_dne0s")
argument_names = ["from", "to"]
return_value = true

[sub_resource type="Resource" id="Resource_e2iet"]
script = ExtResource("5_w82r7")
signal_name = "entered"
to = NodePath("Code")
more_references = []
invoke = "execute"
arguments = []
only_if = SubResource("Resource_kds5n")
deferred = false
enabled = true

[sub_resource type="GDScript" id="GDScript_wregp"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run():
	var rng = RandomNumberGenerator.new()
	var ref_player_health: HealthBar = G.get_parent().find_child(\"PLAYER_HEALTH\",true, false)
	var ref_left_arm = G.get_parent().find_child(\"arm_left\",true, false)
	var ref_right_arm = G.get_parent().find_child(\"arm_right\",true, false)
	var base_chance_to_hit = G.at(\"EnemyChanceToHit\")
	var base_damage = G.at(\"EnemyBaseDamage\")
	var dead_arms = 0
	var has_weapon = false
	if is_alive(ref_left_arm):
		has_weapon = carrying_weapon(ref_left_arm)	
	else:
		dead_arms += 1
	if is_alive(ref_right_arm):
		if not has_weapon:
			has_weapon = carrying_weapon(ref_left_arm)	
	else:
		dead_arms += 1	
	var modified_chance_to_hit = base_chance_to_hit * (1-(0.5*dead_arms))
	if rng.randi_range(0, 100) < modified_chance_to_hit:
		var damage = int(base_damage * rng.randf_range(1,2) if has_weapon else base_damage)
		print(\">> Enemy attacks player for \" + str(damage) + \" damage\")
		ref_player_health.damage(damage)
	else:
		print(\">> Enemy misses their attack\")	

func is_alive(node):
	for child in node.get_children():
		if child is HealthBar:
			return child.current > 0
			
func carrying_weapon(node):			
	for child in node.get_children():
		if child.name.begins_with(\"weapon\"):
			return true
"

[sub_resource type="Resource" id="Resource_085n2"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_wregp")
argument_names = []
return_value = true

[sub_resource type="GDScript" id="GDScript_oibkg"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(result, from: Node2D, to: Node2D):
	return 4
"

[sub_resource type="Resource" id="Resource_iji23"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_oibkg")
argument_names = ["result", "from", "to"]
return_value = true

[sub_resource type="GDScript" id="GDScript_d0305"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(result, from: Node2D, to: Node2D):
	return true
"

[sub_resource type="Resource" id="Resource_3kw72"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_d0305")
argument_names = ["result", "from", "to"]
return_value = true

[sub_resource type="Resource" id="Resource_8am7k"]
script = ExtResource("5_w82r7")
signal_name = "after"
to = NodePath("..")
more_references = []
invoke = "exit"
arguments = [SubResource("Resource_iji23")]
only_if = SubResource("Resource_3kw72")
deferred = false
enabled = true

[sub_resource type="GDScript" id="GDScript_eyd4w"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(transition_id, from: Node2D, to: Node2D):
	return 6
"

[sub_resource type="Resource" id="Resource_8fodn"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_eyd4w")
argument_names = ["transition_id", "from", "to"]
return_value = true

[sub_resource type="GDScript" id="GDScript_be67c"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(transition_id, from: Node2D, to: Node2D):
	return transition_id==5
"

[sub_resource type="Resource" id="Resource_68ad5"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_be67c")
argument_names = ["transition_id", "from", "to"]
return_value = true

[sub_resource type="Resource" id="Resource_352tu"]
script = ExtResource("5_w82r7")
signal_name = "exited"
to = NodePath("..")
more_references = []
invoke = "exit"
arguments = [SubResource("Resource_8fodn")]
only_if = SubResource("Resource_68ad5")
deferred = false
enabled = true

[sub_resource type="GDScript" id="GDScript_ky0ck"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(from: Node2D, to: Node2D):
	return true
"

[sub_resource type="Resource" id="Resource_6sx2f"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_ky0ck")
argument_names = ["from", "to"]
return_value = true

[sub_resource type="Resource" id="Resource_oisih"]
script = ExtResource("5_w82r7")
signal_name = "entered"
to = NodePath("Code")
more_references = []
invoke = "execute"
arguments = []
only_if = SubResource("Resource_6sx2f")
deferred = false
enabled = true

[sub_resource type="GDScript" id="GDScript_2x0g6"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run():
	print(\"I am the legs group\")
"

[sub_resource type="Resource" id="Resource_00dm5"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_2x0g6")
argument_names = []
return_value = true

[sub_resource type="GDScript" id="GDScript_pvn0f"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(result, from: Node2D, to: Node2D):
	return 5
"

[sub_resource type="Resource" id="Resource_qviw5"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_pvn0f")
argument_names = ["result", "from", "to"]
return_value = true

[sub_resource type="GDScript" id="GDScript_ppipb"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run(result, from: Node2D, to: Node2D):
	return true
"

[sub_resource type="Resource" id="Resource_6d1lw"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_ppipb")
argument_names = ["result", "from", "to"]
return_value = true

[sub_resource type="Resource" id="Resource_2n01c"]
script = ExtResource("5_w82r7")
signal_name = "after"
to = NodePath("..")
more_references = []
invoke = "exit"
arguments = [SubResource("Resource_qviw5")]
only_if = SubResource("Resource_6d1lw")
deferred = false
enabled = true

[sub_resource type="GDScript" id="GDScript_adeiw"]
script/source = "@tool
extends U
@warning_ignore(\"unused_parameter\")
func run():
	return not G.get_parent().get_node(\"i5w1-modular-enemies/STATE/player_turn\").active
"

[sub_resource type="Resource" id="Resource_lsvs5"]
script = ExtResource("4_wxur5")
nested_script = SubResource("GDScript_adeiw")
argument_names = []
return_value = true

[node name="i5w1-modular-enemies" type="Node2D"]

[node name="enemy" type="Node2D" parent="."]
position = Vector2(727, 211)
scale = Vector2(3.26054, 3.26054)

[node name="head" type="Node2D" parent="enemy"]
position = Vector2(0, -23)
script = ExtResource("1_ui1dh")
shape_type = "Circle"
circle_radius = 10.0

[node name="HealthBar" type="Node2D" parent="enemy/head"]
position = Vector2(-1.52588e-05, -15.9506)
script = ExtResource("2_m4bil")
current = 10
max = 10
progress_colors = PackedColorArray(1, 0, 0, 1, 1, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1)
metadata/pronto_connections = [SubResource("Resource_0s3tt"), SubResource("Resource_s5ikj")]

[node name="Button" type="Button" parent="enemy/head"]
modulate = Color(1, 1, 1, 0)
offset_left = -10.0
offset_top = -10.0
offset_right = 10.0
offset_bottom = 9.0
script = SubResource("GDScript_37qhu")

[node name="torso" type="Node2D" parent="enemy"]
position = Vector2(0, 14)
script = ExtResource("1_ui1dh")
shape_type = "Capsule"
capsule_height = 57.6259
capsule_radius = 12.9579

[node name="HealthBar2" type="Node2D" parent="enemy/torso"]
position = Vector2(0.306671, -23.2009)
script = ExtResource("2_m4bil")
current = 30
max = 30
progress_colors = PackedColorArray(1, 0, 0, 1, 1, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1)

[node name="Button" type="Button" parent="enemy/torso"]
modulate = Color(1, 1, 1, 0)
self_modulate = Color(1, 1, 1, 0)
offset_left = -13.0
offset_top = -28.0
offset_right = 13.0
offset_bottom = 29.0
script = SubResource("GDScript_nrspf")

[node name="arm_left" type="Node2D" parent="enemy"]
position = Vector2(-22, 16)
rotation = 0.227
script = ExtResource("1_ui1dh")
shape_type = "Capsule"
capsule_height = 41.2661
capsule_radius = 5.127

[node name="HealthBar3" type="Node2D" parent="enemy/arm_left"]
position = Vector2(-33.0565, 0.342552)
rotation = -0.227
script = ExtResource("2_m4bil")
current = 10
max = 10
progress_colors = PackedColorArray(1, 0, 0, 1, 1, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1)

[node name="weapon_stick" type="Node2D" parent="enemy/arm_left"]
position = Vector2(-20.6631, 14.4777)
rotation = -1.45979
script = ExtResource("1_ui1dh")
shape_type = "Capsule"
color = Color(0.603922, 0.388235, 0.137255, 1)
capsule_height = 50.0804
capsule_radius = 2.0

[node name="Button" type="Button" parent="enemy/arm_left"]
modulate = Color(1, 1, 1, 0)
offset_left = -5.0
offset_top = -21.0
offset_right = 5.0
offset_bottom = 21.0
script = SubResource("GDScript_3cywh")

[node name="arm_right" type="Node2D" parent="enemy"]
position = Vector2(24, 17)
rotation = -0.362796
script = ExtResource("1_ui1dh")
shape_type = "Capsule"
capsule_height = 41.2661
capsule_radius = 5.127

[node name="HealthBar4" type="Node2D" parent="enemy/arm_right"]
position = Vector2(31.1908, 3.16987)
rotation = 0.362796
script = ExtResource("2_m4bil")
current = 10
max = 10
progress_colors = PackedColorArray(1, 0, 0, 1, 1, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1)

[node name="Button" type="Button" parent="enemy/arm_right"]
modulate = Color(1, 1, 1, 0)
offset_left = -5.0
offset_top = -21.0
offset_right = 5.0
offset_bottom = 21.0
script = SubResource("GDScript_uls4b")

[node name="leg_left" type="Node2D" parent="enemy"]
position = Vector2(-11, 63)
rotation = 0.227
script = ExtResource("1_ui1dh")
shape_type = "Capsule"
capsule_height = 41.2661
capsule_radius = 5.127

[node name="HealthBar5" type="Node2D" parent="enemy/leg_left"]
position = Vector2(-31.7446, 7.20214)
rotation = -0.227
script = ExtResource("2_m4bil")
current = 15
max = 15
progress_colors = PackedColorArray(1, 0, 0, 1, 1, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1)

[node name="Button" type="Button" parent="enemy/leg_left"]
modulate = Color(1, 1, 1, 0)
offset_left = -5.0
offset_top = -21.0
offset_right = 5.0
offset_bottom = 21.0
script = SubResource("GDScript_1c2oq")

[node name="leg_right" type="Node2D" parent="enemy"]
position = Vector2(13, 62)
rotation = -0.362796
script = ExtResource("1_ui1dh")
shape_type = "Capsule"
capsule_height = 41.2661
capsule_radius = 5.127

[node name="HealthBar6" type="Node2D" parent="enemy/leg_right"]
position = Vector2(33.889, 11.5017)
rotation = 0.362796
script = ExtResource("2_m4bil")
current = 15
max = 15
progress_colors = PackedColorArray(1, 0, 0, 1, 1, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1)

[node name="Button" type="Button" parent="enemy/leg_right"]
modulate = Color(1, 1, 1, 0)
offset_left = -5.0
offset_top = -21.0
offset_right = 5.0
offset_bottom = 21.0
script = SubResource("GDScript_nvc8g")

[node name="STATE" type="Node2D" parent="."]
position = Vector2(552, -306)

[node name="player_turn" type="Node2D" parent="STATE"]
position = Vector2(-280, 96)
script = ExtResource("3_rub11")
active = true
metadata/pronto_connections = [SubResource("Resource_vu03w"), SubResource("Resource_odjah")]

[node name="enemy_turn" type="Node2D" parent="STATE"]
position = Vector2(-122, 94)
script = ExtResource("3_rub11")
metadata/pronto_connections = [SubResource("Resource_npar6"), SubResource("Resource_rdfaw"), SubResource("Resource_gbulo")]

[node name="head" type="Node2D" parent="STATE/enemy_turn"]
position = Vector2(75, -137)
script = ExtResource("3_rub11")
metadata/pronto_connections = [SubResource("Resource_dxgdp"), SubResource("Resource_5jou4")]

[node name="Code" type="Node2D" parent="STATE/enemy_turn/head"]
position = Vector2(153, -2.00001)
script = ExtResource("6_2s4u3")
evaluate = SubResource("Resource_gy78w")
metadata/pronto_connections = [SubResource("Resource_idsmn")]

[node name="torso" type="Node2D" parent="STATE/enemy_turn"]
position = Vector2(76, -76)
script = ExtResource("3_rub11")
metadata/pronto_connections = [SubResource("Resource_qugsu"), SubResource("Resource_nmegl")]

[node name="Code" type="Node2D" parent="STATE/enemy_turn/torso"]
position = Vector2(153, -2)
script = ExtResource("6_2s4u3")
evaluate = SubResource("Resource_pww34")
metadata/pronto_connections = [SubResource("Resource_ghrl2")]

[node name="arms" type="Node2D" parent="STATE/enemy_turn"]
position = Vector2(75, -5)
script = ExtResource("3_rub11")
metadata/pronto_connections = [SubResource("Resource_8ejj3"), SubResource("Resource_e2iet")]

[node name="Code" type="Node2D" parent="STATE/enemy_turn/arms"]
position = Vector2(154, -1)
script = ExtResource("6_2s4u3")
evaluate = SubResource("Resource_085n2")
metadata/pronto_connections = [SubResource("Resource_8am7k")]

[node name="legs" type="Node2D" parent="STATE/enemy_turn"]
position = Vector2(76, 64)
script = ExtResource("3_rub11")
metadata/pronto_connections = [SubResource("Resource_352tu"), SubResource("Resource_oisih")]

[node name="Code" type="Node2D" parent="STATE/enemy_turn/legs"]
position = Vector2(155, -2)
script = ExtResource("6_2s4u3")
evaluate = SubResource("Resource_00dm5")
metadata/pronto_connections = [SubResource("Resource_2n01c")]

[node name="UI" type="Node2D" parent="."]
position = Vector2(0, 488)

[node name="PLAYER_HEALTH" type="Node2D" parent="UI"]
position = Vector2(145, -9)
scale = Vector2(4, 4)
script = ExtResource("2_m4bil")
progress_colors = PackedColorArray(1, 0, 0, 1, 1, 0, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1, 0.196078, 0.803922, 0.196078, 1)

[node name="Label" type="Label" parent="UI/PLAYER_HEALTH"]
offset_left = -60.0
offset_top = -18.25
offset_right = 64.0
offset_bottom = 7.75
theme_override_font_sizes/font_size = 5
text = "Player Health"
horizontal_alignment = 1
vertical_alignment = 1
uppercase = true

[node name="PanelContainer" type="PanelContainer" parent="UI"]
offset_right = 294.0
offset_bottom = 158.0

[node name="VBoxContainer" type="VBoxContainer" parent="UI/PanelContainer"]
layout_mode = 2

[node name="Button" type="Button" parent="UI/PanelContainer/VBoxContainer"]
layout_mode = 2
text = "End Turn"
script = ExtResource("6_adlgl")

[node name="Bind" type="Node2D" parent="UI/PanelContainer/VBoxContainer/Button"]
position = Vector2(-16, 16)
script = ExtResource("6_3m8bw")
evaluate = SubResource("Resource_lsvs5")
to_prop = "disabled"

[node name="PanelContainer" type="PanelContainer" parent="."]
offset_top = -2.0
offset_right = 392.0
offset_bottom = 154.0

[node name="Values" type="Node2D" parent="PanelContainer"]
position = Vector2(12, 13)
script = ExtResource("9_lk3db")

[node name="EnemyChanceToHit" type="Node2D" parent="PanelContainer/Values"]
position = Vector2(-7.07107, 7.07107)
script = ExtResource("10_liufr")
float_from = 0.0
float_to = 100.0
float_value = 50.0
float_step_size = 1.0

[node name="EnemyBaseDamage" type="Node2D" parent="PanelContainer/Values"]
position = Vector2(-10, -4.37114e-07)
script = ExtResource("10_liufr")
float_from = 0.0
float_to = 100.0
float_value = 5.0
float_step_size = 1.0
