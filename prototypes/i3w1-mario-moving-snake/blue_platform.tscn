[gd_scene load_steps=11 format=3 uid="uid://dlkhmn7b7r5dk"]

[ext_resource type="Script" path="res://addons/pronto/behaviors/Placeholder.gd" id="1_mtmsg"]
[ext_resource type="Script" path="res://addons/pronto/behaviors/Spawner.gd" id="1_mwdi2"]
[ext_resource type="Script" path="res://addons/pronto/behaviors/Clock.gd" id="2_slcy2"]
[ext_resource type="Script" path="res://addons/pronto/helpers/Connection.gd" id="3_ku2r0"]
[ext_resource type="Script" path="res://addons/pronto/behaviors/Code.gd" id="4_2f4ck"]

[sub_resource type="Resource" id="Resource_1agbu"]
script = ExtResource("3_ku2r0")
signal_name = "elapsed"
to = NodePath("..")
invoke = ""
arguments = []
only_if = "return true"
expression = "to.gravity_scale = at(\"BluePlatformGravity\")
to.freeze = false"

[sub_resource type="Resource" id="Resource_jmti0"]
script = ExtResource("3_ku2r0")
signal_name = "elapsed"
to = NodePath("../Code")
invoke = "execute"
arguments = []
only_if = "return true"
expression = ""

[sub_resource type="Resource" id="Resource_3lqhx"]
script = ExtResource("3_ku2r0")
signal_name = "elapsed"
to = NodePath("")
invoke = ""
arguments = []
only_if = "return true"
expression = "from.paused = true"

[sub_resource type="Resource" id="Resource_3stq4"]
script = ExtResource("3_ku2r0")
signal_name = "elapsed"
to = NodePath("../../Code2")
invoke = "execute"
arguments = ["return get_parent()"]
only_if = "return true"
expression = ""

[sub_resource type="Resource" id="Resource_loyhk"]
script = ExtResource("3_ku2r0")
signal_name = "elapsed"
to = NodePath("..")
invoke = "spawn"
arguments = []
only_if = "return true"
expression = ""

[node name="Node2D" type="Node2D"]
script = ExtResource("1_mwdi2")

[node name="BluePlatform" type="RigidBody2D" parent="." groups=["blue_platform"]]
collision_mask = 2
gravity_scale = 15.71
freeze = true

[node name="Placeholder" type="Node2D" parent="BluePlatform"]
script = ExtResource("1_mtmsg")
color = Color(0.317647, 0.309804, 1, 1)
placeholder_size = Vector2(60, 20)

[node name="TriggerClock" type="Node2D" parent="BluePlatform"]
position = Vector2(67, 9)
script = ExtResource("2_slcy2")
one_shot = true
paused = true
trigger_interval_in_seconds = 1.0
metadata/pronto_connections = [SubResource("Resource_1agbu"), SubResource("Resource_jmti0"), SubResource("Resource_3lqhx")]

[node name="RespawnClock" type="Node2D" parent="BluePlatform"]
position = Vector2(-12, 68)
script = ExtResource("2_slcy2")
one_shot = true
paused = true
trigger_interval_in_seconds = 1.0
metadata/pronto_connections = [SubResource("Resource_3stq4")]

[node name="Code" type="Node2D" parent="BluePlatform"]
position = Vector2(17, 61)
script = ExtResource("4_2f4ck")
label = "ActivateDespawn"
code = "var clock = get_parent().get_node(\"RespawnClock\")
clock.duration_seconds = at(\"BluePlatformRespawnTime\")
clock.reset_and_start()"

[node name="Code2" type="Node2D" parent="."]
position = Vector2(-29, 43)
script = ExtResource("4_2f4ck")
label = "SpawnPlatform"
arguments = Array[String](["platform"])
code = "platform.queue_free()
get_parent().spawn()"

[node name="InitClock" type="Node2D" parent="."]
position = Vector2(8, -39)
script = ExtResource("2_slcy2")
one_shot = true
duration_seconds = 0.0001
trigger_interval_in_seconds = 1.0
metadata/pronto_connections = [SubResource("Resource_loyhk")]
